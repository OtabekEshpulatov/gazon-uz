<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments :: head(~{::title},~{::link})}">
    <meta charset="UTF-8">
    <title>Home</title>
    <link rel="stylesheet" href="">
</head>
<body>

<!-- <div>
    <input id="address" type="textbox" value="Sydney, NSW">
    <input type="button" value="Encode" onclick="codeAddress()">
  </div> -->



<div th:insert="header ::header">

</div>

<form method="get" action="/pitch/searched">
    <div><button type="button" id="btn btn-success buttonlocation" onclick="mine()">Button</button></div>
    <input type="text" id="address" name="address">
    <input type="hidden" id="latitude" name="latitude">
    <input type="hidden" id="longitude" name="longitude">
    <button type="submit">Find Pitch</button>
</form>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>

<script async
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAWdoFIoCvmaZM2ZUyZYHlCp0C6Tx7O_40&callback=initMap">
</script>
<script>

    // var map;
    // var options= {
    //                 center: { lat: 41.311081, lng: 69.240562 },
    //                 zoom: 8,
    //   }
    //   addMarker({coords:{lat:41.311082, lng:69.240561}});

    // function addMarker(props){
    //     var marker=new google.maps.Marker({
    //     position:props.coords,
    //     map:map,

    // });
    // }
    function mine(){
        if(navigator.geolocation){
            navigator.geolocation.getCurrentPosition(function(position){
                 var elem1=document.getElementById("latitude");
                 var elem2=document.getElementById("longitude");
                 elem1.value=position.coords.latitude;
                 elem2.value=position.coords.longitude;
                 console.log(elem1.value);
                 console.log(elem2.value);
                $.get('https://maps.googleapis.com/maps/api/geocode/json?latlng='+position.coords.latitude+','+position.coords.longitude+'&key=AIzaSyAWdoFIoCvmaZM2ZUyZYHlCp0C6Tx7O_40',function (data){
                    var elem=document.getElementById("address");
                    elem.value=data.results[0].formatted_address;
                });

            });
        }else 'No position found';}



    // fetch('https://jsonplaceholder.typicode.com/posts', {
    // method: "POST",
    // body: JSON.stringify(_data),
    // headers: {"Content-type": "application/json; charset=UTF-8"}




    // $('#sodikov').click(function(){
    // if(navigator.geolocation){
    //   if(navigator.geolocation){
    //             navigator.geolocation.getCurrentPosition(function(position){
    //                 console.log(position);

    //    $.get('https://maps.googleapis.com/maps/api/geocode/json?latlng='+position.coords.latitude+','+position.coords.longitude+'&key=AIzaSyAWdoFIoCvmaZM2ZUyZYHlCp0C6Tx7O_40',function (data){
    //    return data[0];
    //   // map=getElementById("map");
    //   addMarker({coords:{lat:position.coords.latitude, lng:position.coords.longitude}})});


    // });
    //         }
    //         else {
    //                 console.log("geolocation not found!")
    //           }
    // }



    // });





    // function initMap() {

    //  var map= new google.maps.Map(document.getElementById("map"), options)
    // // var marker=new google.maps.Marker({
    // //     position:{lat:41.311082, lng:69.240561},
    // //     map:map

    // // });
    // var infowindow =new google.maps.InfoWindow({
    //     content:'<h1>Hi man</h1>'

    // });
    // addMarker({coords:{lat:41.311082, lng:69.240561}});
    // }

</script>


</body>
</html>